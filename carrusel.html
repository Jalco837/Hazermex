<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrusel Coverflow con Modal</title>
  <link rel="stylesheet" href="css/carrusel.css">
</head>
<body>

  <div class="carousel" id="carousel">
    <div class="card"><img src="images/carrusel/carruseluno.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruseldos.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruseltres.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselcuatro.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselcinco.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselseis.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselsiete.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselocho.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselnueve.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruseldiez.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselonce.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruseldoce.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruseltrece.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselcatorce.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselquince.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruseldseis.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruseldocho.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruseldnueve.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselveinte.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselvuno.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselvdos.png" alt=""></div>
    <div class="card"><img src="images/carrusel/carruselvtres.png" alt=""></div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <button class="close-btn" id="closeBtn">&times;</button>
      <img src="" alt="Imagen ampliada" id="modalImg">
    </div>
  </div>

  <script>
    const carousel = document.getElementById("carousel");
    const cards = document.querySelectorAll(".card");
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modalImg");
    const closeBtn = document.getElementById("closeBtn");
    let currentIndex = 0;

    function updateCards() {
      let center = carousel.scrollLeft + carousel.offsetWidth / 2;
      cards.forEach(card => {
        let cardCenter = card.offsetLeft + card.offsetWidth / 2;
        let offset = cardCenter - center;
        card.classList.remove("active", "left", "right");
        if (Math.abs(offset) < card.offsetWidth / 2) card.classList.add("active");
        else if (offset > 0 && offset < card.offsetWidth * 1.5) card.classList.add("right");
        else if (offset < 0 && offset > -card.offsetWidth * 1.5) card.classList.add("left");
      });
    }

    function autoScroll() {
      currentIndex++;
      if(currentIndex >= cards.length) currentIndex = 0;
      const card = cards[currentIndex];
      const scrollLeft = card.offsetLeft - (carousel.offsetWidth - card.offsetWidth)/2;
      carousel.scrollTo({ left: scrollLeft, behavior: 'smooth' });
    }

    carousel.addEventListener("scroll", updateCards);
    window.addEventListener("load", () => {
      updateCards();
      setInterval(autoScroll, 5000); // autoplay cada 5s
    });

    // Modal
    cards.forEach(card => {
      card.addEventListener("click", () => {
        modal.style.display = "flex";
        modalImg.src = card.querySelector("img").src;
      });
    });

    closeBtn.addEventListener("click", () => {
      modal.style.display = "none";
      modalImg.src = "";
    });

    // Cerrar al hacer clic fuera de la imagen
    modal.addEventListener("click", (e) => {
      if(e.target === modal) {
        modal.style.display = "none";
        modalImg.src = "";
      }
    });
  </script>

</body>
</html>
